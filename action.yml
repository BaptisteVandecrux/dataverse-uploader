name: 'Dataverse Uploader Action'
description: 'Uploads a repository to Dataverse'

inputs:
    DATAVERSE_TOKEN:
      required: true
      description: "dataverse personal access token"
    DATAVERSE_SERVER:
      required: true
      description: "dataverse server"
    DATAVERSE_DATASET_DOI:
      required: true
      description: "existing dataverse dataset doi"

runs:
    using: "composite"
    steps:
        - name: Checkout repo
          uses: actions/checkout@v2
          with:
            path: repo
        - name: Install Python
          uses: actions/setup-python@v2
          with:
            python-version: '3.x'
        - name: Install dependencies
          shell: bash
          run: |
            python -m pip install --upgrade pip
            pip install -r $GITHUB_ACTION_PATH/requirements.txt
        - name: Check repo dir
          shell: bash
          run: "ls -ls repo/"
        - name: Upload files
          shell: bash
          run: >-
            python 
            #GITHUB_ACTION_PATH/dataverse.py 
            "${{inputs.DATAVERSE_TOKEN}}" 
            "${{inputs.DATAVERSE_SERVER}}" 
            "${{inputs.DATAVERSE_DATASET_DOI}}"
            
